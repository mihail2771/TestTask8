{"ast":null,"code":"import React,{useState,useEffect}from'react';import axios from'axios';import'./App.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function TimeSeetRow(_ref){let{timeSeet,employee,updateTimeSeet,deleteTimeSeet}=_ref;const[isEditing,setIsEditing]=useState(false);const[editedTimeSeet,setEditedTimeSeet]=useState({...timeSeet});const handleEditChange=e=>{const{name,value}=e.target;setEditedTimeSeet({...editedTimeSeet,[name]:value});};const handleSave=async()=>{try{await axios.put(\"\".concat(process.env.REACT_APP_API_URL,\"/non_working_time/\").concat(updateTimeSeet.id),updateTimeSeet);//setData((prevData) =>\n//  prevData.map((item) =>\n//    item.id === updateTimeSeet.id ? updateTimeSeet : item\n//  )\n//);\n//setEditingRecordId(null);\n//setEditedRecord(null);\n}catch(error){console.error('Error saving record:',error);}};const handleDelete=()=>{fetch(\"/api/TimeSeets/\".concat(timeSeet.id),{method:'DELETE'}).then(()=>deleteTimeSeet(timeSeet.id)).catch(error=>console.error('Error deleting TimeSeet:',error));};return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:\"\".concat(employee.firstName,\" \").concat(employee.lastName,\" (\").concat(employee.id,\")\")}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"select\",{name:\"reason\",value:editedTimeSeet.reason,onChange:handleEditChange,disabled:!isEditing,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0412\\u044B\\u0431\\u043E\\u0440 \\u043F\\u0440\\u0438\\u0447\\u0438\\u043D\\u044B\"}),/*#__PURE__*/_jsx(\"option\",{value:\"1\",children:\"\\u041E\\u0442\\u043F\\u0443\\u0441\\u043A\"}),/*#__PURE__*/_jsx(\"option\",{value:\"2\",children:\"\\u0411\\u043E\\u043B\\u044C\\u043D\\u0438\\u0447\\u043D\\u044B\\u0439\"}),/*#__PURE__*/_jsx(\"option\",{value:\"3\",children:\"\\u041F\\u0440\\u043E\\u0433\\u0443\\u043B\"})]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"startDate\",value:isEditing?editedTimeSeet.startDate.split(\"T\")[0]:timeSeet.startDate.split(\"T\")[0],onChange:handleEditChange,disabled:!isEditing})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"1\",name:\"duration\",value:editedTimeSeet.duration,onChange:handleEditChange,disabled:!isEditing})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"discounted\",checked:editedTimeSeet.discounted,onChange:handleEditChange,disabled:!isEditing})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:editedTimeSeet.description,onChange:handleEditChange,disabled:!isEditing})}),/*#__PURE__*/_jsx(\"td\",{className:\"actions\",children:isEditing?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"save\",onClick:handleSave,children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{className:\"cancel\",onClick:()=>setIsEditing(false),children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"edit\",onClick:()=>setIsEditing(true),children:\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete\",onClick:handleDelete,children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"})]})})]},timeSeet.id);}export default TimeSeetRow;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TimeSeetRow","_ref","timeSeet","employee","updateTimeSeet","deleteTimeSeet","isEditing","setIsEditing","editedTimeSeet","setEditedTimeSeet","handleEditChange","e","name","value","target","handleSave","put","concat","process","env","REACT_APP_API_URL","id","error","console","handleDelete","fetch","method","then","catch","children","firstName","lastName","reason","onChange","disabled","type","startDate","split","min","duration","checked","discounted","description","className","onClick"],"sources":["C:/Users/misha/Desktop/Тестовое задание 8/web-app/src/TimeSeetRow.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport './App.css';\r\n\r\n\r\nfunction TimeSeetRow ({ timeSeet, employee, updateTimeSeet, deleteTimeSeet }) {\r\n    const [isEditing, setIsEditing] = useState(false);\r\n    const [editedTimeSeet, setEditedTimeSeet] = useState({ ...timeSeet });\r\n\r\n    const handleEditChange = (e) => {\r\n        const { name, value } = e.target;\r\n        setEditedTimeSeet({ ...editedTimeSeet, [name]: value });\r\n    };\r\n    \r\n    const handleSave = async () => {\r\n        try {\r\n          await axios.put(`${process.env.REACT_APP_API_URL}/non_working_time/${updateTimeSeet.id}`, updateTimeSeet);\r\n          //setData((prevData) =>\r\n          //  prevData.map((item) =>\r\n          //    item.id === updateTimeSeet.id ? updateTimeSeet : item\r\n          //  )\r\n          //);\r\n          //setEditingRecordId(null);\r\n          //setEditedRecord(null);\r\n        } catch (error) {\r\n          console.error('Error saving record:', error);\r\n        }\r\n      };\r\n\r\n    const handleDelete = () => {\r\n        fetch(`/api/TimeSeets/${timeSeet.id}`, {\r\n            method: 'DELETE',\r\n        })\r\n            .then(() => deleteTimeSeet(timeSeet.id))\r\n            .catch(error => console.error('Error deleting TimeSeet:', error));\r\n    };\r\n   \r\n    return (\r\n        <tr key={timeSeet.id}>\r\n            <td>{`${employee.firstName} ${employee.lastName} (${employee.id})`}</td>\r\n            <td>{<select name=\"reason\" value={editedTimeSeet.reason} onChange={handleEditChange} disabled={!isEditing}>\r\n              <option value=\"\">Выбор причины</option>\r\n              <option value=\"1\">Отпуск</option>\r\n              <option value=\"2\">Больничный</option>\r\n              <option value=\"3\">Прогул</option>\r\n            </select>}</td>\r\n            <td>{<input type=\"date\" name=\"startDate\" value={isEditing ? editedTimeSeet.startDate.split(\"T\")[0] : timeSeet.startDate.split(\"T\")[0]} onChange={handleEditChange} disabled={!isEditing}/>}</td>\r\n            <td>{<input type=\"number\" min=\"1\" name=\"duration\" value={editedTimeSeet.duration} onChange={handleEditChange} disabled={!isEditing}/>}</td>\r\n            <td>{<input type=\"checkbox\" name=\"discounted\" checked={editedTimeSeet.discounted} onChange={handleEditChange} disabled={!isEditing}/>}</td>\r\n            <td>{<textarea name=\"description\" value={editedTimeSeet.description} onChange={handleEditChange} disabled={!isEditing}/>}</td>\r\n            <td className=\"actions\">\r\n                {isEditing ? (\r\n                    <>\r\n                      <button className=\"save\" onClick={handleSave}>Сохранить</button>\r\n                      <button className=\"cancel\" onClick={() => setIsEditing(false)}>Отмена</button>\r\n                    </>\r\n                  ) : (\r\n                    <>\r\n                      <button className=\"edit\" onClick={() => setIsEditing(true)}>Изменить</button>\r\n                      <button className=\"delete\" onClick={handleDelete}>Удалить</button>\r\n                    </>               \r\n                  )}\r\n                </td>\r\n        </tr>\r\n    );\r\n  }\r\n  \r\n  export default TimeSeetRow;"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,KAAK,KAAM,OAAO,CACzB,MAAO,WAAW,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAGnB,QAAS,CAAAC,WAAWA,CAAAC,IAAA,CAA0D,IAAxD,CAAEC,QAAQ,CAAEC,QAAQ,CAAEC,cAAc,CAAEC,cAAe,CAAC,CAAAJ,IAAA,CACxE,KAAM,CAACK,SAAS,CAAEC,YAAY,CAAC,CAAGhB,QAAQ,CAAC,KAAK,CAAC,CACjD,KAAM,CAACiB,cAAc,CAAEC,iBAAiB,CAAC,CAAGlB,QAAQ,CAAC,CAAE,GAAGW,QAAS,CAAC,CAAC,CAErE,KAAM,CAAAQ,gBAAgB,CAAIC,CAAC,EAAK,CAC5B,KAAM,CAAEC,IAAI,CAAEC,KAAM,CAAC,CAAGF,CAAC,CAACG,MAAM,CAChCL,iBAAiB,CAAC,CAAE,GAAGD,cAAc,CAAE,CAACI,IAAI,EAAGC,KAAM,CAAC,CAAC,CAC3D,CAAC,CAED,KAAM,CAAAE,UAAU,CAAG,KAAAA,CAAA,GAAY,CAC3B,GAAI,CACF,KAAM,CAAAtB,KAAK,CAACuB,GAAG,IAAAC,MAAA,CAAIC,OAAO,CAACC,GAAG,CAACC,iBAAiB,uBAAAH,MAAA,CAAqBb,cAAc,CAACiB,EAAE,EAAIjB,cAAc,CAAC,CACzG;AACA;AACA;AACA;AACA;AACA;AACA;AACF,CAAE,MAAOkB,KAAK,CAAE,CACdC,OAAO,CAACD,KAAK,CAAC,sBAAsB,CAAEA,KAAK,CAAC,CAC9C,CACF,CAAC,CAEH,KAAM,CAAAE,YAAY,CAAGA,CAAA,GAAM,CACvBC,KAAK,mBAAAR,MAAA,CAAmBf,QAAQ,CAACmB,EAAE,EAAI,CACnCK,MAAM,CAAE,QACZ,CAAC,CAAC,CACGC,IAAI,CAAC,IAAMtB,cAAc,CAACH,QAAQ,CAACmB,EAAE,CAAC,CAAC,CACvCO,KAAK,CAACN,KAAK,EAAIC,OAAO,CAACD,KAAK,CAAC,0BAA0B,CAAEA,KAAK,CAAC,CAAC,CACzE,CAAC,CAED,mBACIzB,KAAA,OAAAgC,QAAA,eACIlC,IAAA,OAAAkC,QAAA,IAAAZ,MAAA,CAAQd,QAAQ,CAAC2B,SAAS,MAAAb,MAAA,CAAId,QAAQ,CAAC4B,QAAQ,OAAAd,MAAA,CAAKd,QAAQ,CAACkB,EAAE,MAAQ,CAAC,cACxE1B,IAAA,OAAAkC,QAAA,cAAKhC,KAAA,WAAQe,IAAI,CAAC,QAAQ,CAACC,KAAK,CAAEL,cAAc,CAACwB,MAAO,CAACC,QAAQ,CAAEvB,gBAAiB,CAACwB,QAAQ,CAAE,CAAC5B,SAAU,CAAAuB,QAAA,eACxGlC,IAAA,WAAQkB,KAAK,CAAC,EAAE,CAAAgB,QAAA,CAAC,2EAAa,CAAQ,CAAC,cACvClC,IAAA,WAAQkB,KAAK,CAAC,GAAG,CAAAgB,QAAA,CAAC,sCAAM,CAAQ,CAAC,cACjClC,IAAA,WAAQkB,KAAK,CAAC,GAAG,CAAAgB,QAAA,CAAC,8DAAU,CAAQ,CAAC,cACrClC,IAAA,WAAQkB,KAAK,CAAC,GAAG,CAAAgB,QAAA,CAAC,sCAAM,CAAQ,CAAC,EAC3B,CAAC,CAAK,CAAC,cACflC,IAAA,OAAAkC,QAAA,cAAKlC,IAAA,UAAOwC,IAAI,CAAC,MAAM,CAACvB,IAAI,CAAC,WAAW,CAACC,KAAK,CAAEP,SAAS,CAAGE,cAAc,CAAC4B,SAAS,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAGnC,QAAQ,CAACkC,SAAS,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAE,CAACJ,QAAQ,CAAEvB,gBAAiB,CAACwB,QAAQ,CAAE,CAAC5B,SAAU,CAAC,CAAC,CAAK,CAAC,cAChMX,IAAA,OAAAkC,QAAA,cAAKlC,IAAA,UAAOwC,IAAI,CAAC,QAAQ,CAACG,GAAG,CAAC,GAAG,CAAC1B,IAAI,CAAC,UAAU,CAACC,KAAK,CAAEL,cAAc,CAAC+B,QAAS,CAACN,QAAQ,CAAEvB,gBAAiB,CAACwB,QAAQ,CAAE,CAAC5B,SAAU,CAAC,CAAC,CAAK,CAAC,cAC3IX,IAAA,OAAAkC,QAAA,cAAKlC,IAAA,UAAOwC,IAAI,CAAC,UAAU,CAACvB,IAAI,CAAC,YAAY,CAAC4B,OAAO,CAAEhC,cAAc,CAACiC,UAAW,CAACR,QAAQ,CAAEvB,gBAAiB,CAACwB,QAAQ,CAAE,CAAC5B,SAAU,CAAC,CAAC,CAAK,CAAC,cAC3IX,IAAA,OAAAkC,QAAA,cAAKlC,IAAA,aAAUiB,IAAI,CAAC,aAAa,CAACC,KAAK,CAAEL,cAAc,CAACkC,WAAY,CAACT,QAAQ,CAAEvB,gBAAiB,CAACwB,QAAQ,CAAE,CAAC5B,SAAU,CAAC,CAAC,CAAK,CAAC,cAC9HX,IAAA,OAAIgD,SAAS,CAAC,SAAS,CAAAd,QAAA,CAClBvB,SAAS,cACNT,KAAA,CAAAE,SAAA,EAAA8B,QAAA,eACElC,IAAA,WAAQgD,SAAS,CAAC,MAAM,CAACC,OAAO,CAAE7B,UAAW,CAAAc,QAAA,CAAC,wDAAS,CAAQ,CAAC,cAChElC,IAAA,WAAQgD,SAAS,CAAC,QAAQ,CAACC,OAAO,CAAEA,CAAA,GAAMrC,YAAY,CAAC,KAAK,CAAE,CAAAsB,QAAA,CAAC,sCAAM,CAAQ,CAAC,EAC9E,CAAC,cAEHhC,KAAA,CAAAE,SAAA,EAAA8B,QAAA,eACElC,IAAA,WAAQgD,SAAS,CAAC,MAAM,CAACC,OAAO,CAAEA,CAAA,GAAMrC,YAAY,CAAC,IAAI,CAAE,CAAAsB,QAAA,CAAC,kDAAQ,CAAQ,CAAC,cAC7ElC,IAAA,WAAQgD,SAAS,CAAC,QAAQ,CAACC,OAAO,CAAEpB,YAAa,CAAAK,QAAA,CAAC,4CAAO,CAAQ,CAAC,EAClE,CACH,CACC,CAAC,GAxBJ3B,QAAQ,CAACmB,EAyBd,CAAC,CAEX,CAEA,cAAe,CAAArB,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}