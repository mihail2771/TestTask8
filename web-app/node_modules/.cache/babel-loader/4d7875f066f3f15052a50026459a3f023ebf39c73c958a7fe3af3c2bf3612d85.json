{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import\"./App.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function TimeSeetRow(_ref){let{timeSeet,employee,updateTimeSeet,deleteTimeSeet}=_ref;const[isEditing,setIsEditing]=useState(false);const[editedTimeSeet,setEditedTimeSeet]=useState({...timeSeet});useEffect(()=>{setEditedTimeSeet({...timeSeet});},[timeSeet]);const handleEditChange=e=>{const{name,checked,type,value}=e.target;setEditedTimeSeet({...editedTimeSeet,[name]:type===\"checkbox\"?checked:value});};const handleSave=async()=>{try{await updateTimeSeet(editedTimeSeet);setIsEditing(false);}catch(error){console.error(\"Error saving record:\",error);}};const handleDelete=async()=>{try{await deleteTimeSeet(editedTimeSeet);setIsEditing(false);}catch(error){console.error(\"Error saving record:\",error);}};return/*#__PURE__*/_jsxs(\"tr\",{id:isEditing?editedTimeSeet.id:timeSeet.id,value:isEditing?editedTimeSeet.id:timeSeet.id,children:[/*#__PURE__*/_jsx(\"td\",{children:\"\".concat(employee.firstName,\" \").concat(employee.lastName,\" (\").concat(employee.id,\")\")}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"select\",{name:\"reason\",value:editedTimeSeet.reason,onChange:handleEditChange,disabled:!isEditing,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"\\u0412\\u044B\\u0431\\u043E\\u0440 \\u043F\\u0440\\u0438\\u0447\\u0438\\u043D\\u044B\"}),/*#__PURE__*/_jsx(\"option\",{value:1,children:\"\\u041E\\u0442\\u043F\\u0443\\u0441\\u043A\"}),/*#__PURE__*/_jsx(\"option\",{value:2,children:\"\\u0411\\u043E\\u043B\\u044C\\u043D\\u0438\\u0447\\u043D\\u044B\\u0439\"}),/*#__PURE__*/_jsx(\"option\",{value:3,children:\"\\u041F\\u0440\\u043E\\u0433\\u0443\\u043B\"})]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"date\",name:\"startDate\",value:timeSeet.startDate.split(\"T\")[0],onChange:handleEditChange,disabled:!isEditing})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",min:\"1\",name:\"duration\",value:isEditing?editedTimeSeet.duration:timeSeet.duration,onChange:handleEditChange,disabled:!isEditing})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"discounted\",checked:isEditing?editedTimeSeet.discounted:timeSeet.discounted,onChange:handleEditChange,disabled:!isEditing})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"textarea\",{name:\"description\",value:isEditing?editedTimeSeet.description:timeSeet.description,onChange:handleEditChange,disabled:!isEditing})}),/*#__PURE__*/_jsx(\"td\",{className:\"actions\",children:isEditing?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"save\",onClick:handleSave,children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{className:\"cancel\",onClick:()=>setIsEditing(false),children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\"})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{className:\"edit\",onClick:()=>setIsEditing(true),children:\"\\u0418\\u0437\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(\"button\",{className:\"delete\",onClick:handleDelete,children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"})]})})]});}export default TimeSeetRow;","map":{"version":3,"names":["React","useState","useEffect","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TimeSeetRow","_ref","timeSeet","employee","updateTimeSeet","deleteTimeSeet","isEditing","setIsEditing","editedTimeSeet","setEditedTimeSeet","handleEditChange","e","name","checked","type","value","target","handleSave","error","console","handleDelete","id","children","concat","firstName","lastName","reason","onChange","disabled","startDate","split","min","duration","discounted","description","className","onClick"],"sources":["C:/Users/misha/Desktop/Тестовое задание 8/web-app/src/TimeSeetRow.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport \"./App.css\";\r\n\r\nfunction TimeSeetRow({ timeSeet, employee, updateTimeSeet, deleteTimeSeet }) {\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [editedTimeSeet, setEditedTimeSeet] = useState({ ...timeSeet });\r\n\r\n  useEffect(() => {\r\n    setEditedTimeSeet({ ...timeSeet });\r\n  }, [timeSeet]);\r\n\r\n  const handleEditChange = (e) => {\r\n    const { name, checked, type, value } = e.target;\r\n    setEditedTimeSeet({\r\n      ...editedTimeSeet,\r\n      [name]: type === \"checkbox\" ? checked : value,\r\n    });\r\n  };\r\n\r\n  const handleSave = async () => {\r\n    try {\r\n      await updateTimeSeet(editedTimeSeet);\r\n      setIsEditing(false);\r\n    } catch (error) {\r\n      console.error(\"Error saving record:\", error);\r\n    }\r\n  };\r\n\r\n  const handleDelete = async () => {\r\n    try {\r\n      await deleteTimeSeet(editedTimeSeet);\r\n      setIsEditing(false);\r\n    } catch (error) {\r\n      console.error(\"Error saving record:\", error);\r\n    }\r\n  };\r\n  \r\n  return (\r\n    <tr id={isEditing ? editedTimeSeet.id : timeSeet.id} value={isEditing ? editedTimeSeet.id : timeSeet.id}>\r\n      <td>{`${employee.firstName} ${employee.lastName} (${employee.id})`}</td>\r\n      <td>\r\n        {\r\n          <select\r\n            name=\"reason\"\r\n            value={editedTimeSeet.reason}\r\n            onChange={handleEditChange}\r\n            disabled={!isEditing}\r\n          >\r\n            <option value=\"\">Выбор причины</option>\r\n            <option value={1}>Отпуск</option>\r\n            <option value={2}>Больничный</option>\r\n            <option value={3}>Прогул</option>\r\n          </select>\r\n        }\r\n      </td>\r\n      <td>\r\n        {\r\n          <input\r\n            type=\"date\"\r\n            name=\"startDate\"\r\n            value={timeSeet.startDate.split(\"T\")[0]\r\n            }\r\n            onChange={handleEditChange}\r\n            disabled={!isEditing}\r\n          />\r\n        }\r\n      </td>\r\n      <td>\r\n        {\r\n          <input\r\n            type=\"number\"\r\n            min=\"1\"\r\n            name=\"duration\"\r\n            value={isEditing ? editedTimeSeet.duration : timeSeet.duration}\r\n            onChange={handleEditChange}\r\n            disabled={!isEditing}\r\n          />\r\n        }\r\n      </td>\r\n      <td>\r\n        {\r\n          <input\r\n            type=\"checkbox\"\r\n            name=\"discounted\"\r\n            checked={\r\n              isEditing ? editedTimeSeet.discounted : timeSeet.discounted\r\n            }\r\n            onChange={handleEditChange}\r\n            disabled={!isEditing}\r\n          />\r\n        }\r\n      </td>\r\n      <td>\r\n        {\r\n          <textarea\r\n            name=\"description\"\r\n            value={\r\n              isEditing ? editedTimeSeet.description : timeSeet.description\r\n            }\r\n            onChange={handleEditChange}\r\n            disabled={!isEditing}\r\n          />\r\n        }\r\n      </td>\r\n      <td className=\"actions\">\r\n        {isEditing ? (\r\n          <>\r\n            <button className=\"save\" onClick={handleSave}>\r\n              Сохранить\r\n            </button>\r\n            <button className=\"cancel\" onClick={() => setIsEditing(false)}>\r\n              Отмена\r\n            </button>\r\n          </>\r\n        ) : (\r\n          <>\r\n            <button className=\"edit\" onClick={() => setIsEditing(true)}>\r\n              Изменить\r\n            </button>\r\n            <button className=\"delete\" onClick={handleDelete}>\r\n              Удалить\r\n            </button>\r\n          </>\r\n        )}\r\n      </td>\r\n    </tr>\r\n  );\r\n}\r\n\r\nexport default TimeSeetRow;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}